<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circolari</title>
    <style>
        body {
            margin: 0em;
        }

        .container {
            display: grid;
            width: 100%;
            height: 100vh;
            grid-template-columns: 1fr 3fr;
            grid-template-rows: 1fr 7fr;
            grid-template-areas:
                "categoria circolari"
                "ultimecirc circolari";
        }

        .circolari {
            grid-area: circolari;
            border: 1px solid black;
        }

        .categoria {
            grid-area: categoria;
            border: 1px solid black;
            text-align: center;
            vertical-align: middle;
            background-color: #323639;
            display: grid;
            place-items: center;
        }

        #ultimecirc {
            grid-area: ultimecirc;
            border: 1px solid black;
            padding: 1em;
            background-color: #323639;
            overflow-y: auto;
        }

        #contenitore {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 2em;
        }

        table {
            width: 100%;
        }

        #lista {
            border-right: 1em solid black;
            width: 40%;
        }

        .categoria select {
            border-radius: 0.5em;
            font-size: xx-large;
            background-color: white;
            border-color: #EECD00;
            text-align: center;
        }

        .categoria #ricCategoria {
            display: none;
        }

        .categoria input {
            border-radius: 0.5em;
            font-size: xx-large;
            background-color: white;
            border-color: #EECD00;
            text-align: center;
            display: none;
            width: 50%;
        }

        .categoria #cercaNum {
            border-radius: 0.5em;
            font-size: xx-large;
            background-color: white;
            border-color: #EECD00;
            text-align: center;
            display: none;
        }

        option {
            background-color: white;
        }

        .circ {
            background-color: white;
            display: grid;
            width: 90%;
            height: auto;
            margin: auto;
            margin-bottom: 0.5em;
            grid-template-columns: auto 1fr;
            grid-template-rows: auto auto;
            grid-template-areas: "icone testo";
            align-items: center;
            border-radius: 0.5em;
        }

        .circ:hover {
            background-color: #c5aa00;
        }

        #icone {
            grid-area: icone;
            padding: 1em;
        }

        #testo {
            grid-area: testo;
        }

        #testo p,
        #testo h4 {
            margin: 0em;
        }

        .allineaVerticale {
            display: flex;
            align-items: center;
        }
    </style>
</head>

<body>
    <div class="container" id="pagina">
        <!--   CIRCOLARE ATTIVA   -->
        <div class="circolari">
            <embed src="file.pdf" type="application/pdf" width="100%" height="100%" />
        </div>

        <!--   CIRCOLARI   -->
        <div id="ultimecirc">
            <!--
            <div class="circ" width="50em" onclick="aggiungi()">
                <div id="icone">
                    <img src="pdf.png" width="50em">
                </div>
                <div id="testo">
                    <h4>CIRC500</h4>
                    <p>Simulazione seconda prova scritta 5M1 5M2 7 maggio 2024.</p>
                    <h4>03-05-2024</h4>
                    <p>Tutto il personale</p>
                </div>
            </div>
            -->
        </div>

        <!--   ricCaategoria   -->
        <div class="categoria">
            <select id="ricerca" onchange="ricerca()">
                <option disabled selected hidden>Ricerca per</option>
                <option value="ricCategoria">Categoria</option>
                <option value="ricNumero">Numero</option>
            </select>

            <select id="ricCategoria" placeholder="Tipologia" onchange="carica()">
                <option disabled selected hidden>Categoria</option>
                <option value="albo_sindacale">Albo sindacale</option>
                <option value="alunni">Alunni</option>
                <option value="docenti">Docenti</option>
                <option value="famiglie">Famiglie</option>
                <option value="personale_ata">Personale ATA</option>
                <option value="per_tutti">Per tutti</option>
            </select>
            <div class="allineaVerticale">
                <input type="number" min="1" placeholder="Numero cirolare..." id="ricNumero" name="ricNumero">
                <button id="cercaNum">Cerca</button>
            </div>

        </div>
    </div>
</body>
<script>

    function ricerca() {
        var ricercaSelezionata = document.getElementById("ricerca").value;
        switch (ricercaSelezionata) {
            case "ricCategoria":
                ricCategoria();
                break;
            case "ricNumero":
                ricNumero();
                break;
        }
    }

    function ricCategoria() {
        var select = document.getElementById("ricCategoria");
        document.getElementById("ricNumero").style.display = "none";
        document.getElementById("cercaNum").style.display = "none"
        console.log("funzione categorie");
        select.style.display = "unset";

    }
    function ricNumero() {
        var select = document.getElementById("ricNumero");
        document.getElementById("ricCategoria").style.display = "none";
        document.getElementById("cercaNum").style.display = "unset";
        console.log("funzione numero");
        select.style.display = "unset";
    }

    function carica() {
        var categoriaSelezionata = document.getElementById("ricCategoria").value;
        switch (categoriaSelezionata) {
            case "albo_sindacale":
                funzioneAlboSindacale();
                break;
            case "alunni":
                funzioneAlunni();
                break;
            case "docenti":
                funzioneDocenti();
                break;
            case "famiglie":
                funzioneFamiglie();
                break;
            case "personale_ata":
                funzionePersonaleATA();
                break;
            case "per_tutti":
                funzionePerTutti();
                break;
            default:
                break;
        }
    }

    async function funzioneAlboSindacale() {
        console.log("Funzione per Albo sindacale");
        let url = "http://10.1.0.52:8080/circolari?albo_Sindacale=1";
        let risposta = await fetch(url);
        if (risposta.ok) {
            let dati = await risposta.json();
            console.log(dati);
        }

    }

    async function funzioneAlunni() {
        // Logica per l'opzione Alunni
        console.log("Funzione per Alunni");
        let url = "http://10.1.0.52:8080/circolari?alunni=1";
        let risposta = await fetch(url);
        if (risposta.ok) {
            let dati = await risposta.json();
            console.log(dati);
        }

    }

    async function funzioneDocenti() {
        // Logica per l'opzione Docenti
        console.log("Funzione per Docenti");
        let url = "http://10.1.0.52:8080/circolari?docenti=1";
        let risposta = await fetch(url);
        if (risposta.ok) {
            let dati = await risposta.json();
            console.log(dati);
            for (let i = 0; i < dati.length; i++) {
                let numero = dati[i].numero;
                let titolo = dati[i].nome;
                let data = dati[i].data;
                // Seleziona il div di destinazione
                var divDestinazione = document.getElementById("ultimecirc");

                // Crea un nuovo elemento div
                var nuovoDiv = document.createElement("div");
                nuovoDiv.className = "circ";
                nuovoDiv.setAttribute("width", "50em");
                nuovoDiv.setAttribute("onclick", "aggiungi()");

                // Contenuto del nuovo div
                nuovoDiv.innerHTML = `
    <div id="icone">
        <img src="pdf.png" width="50em">
    </div>
    <div id="testo">
        <h4>CIRC` + numero + `</h4>
        <p>` + titolo + `</p>
        <h4>` + data + `</h4>
    </div>
`;

                // Aggiungi il nuovo div al div di destinazione
                divDestinazione.appendChild(nuovoDiv);

            }


        }



    }

    async function funzioneFamiglie() {
        // Logica per l'opzione Famiglie
        console.log("Funzione per Famiglie");
        let url = "http://10.1.0.52:8080/circolari?famiglie=1";
        let risposta = await fetch(url);
        if (risposta.ok) {
            let dati = await risposta.json();
            console.log(dati);
        }

    }

    async function funzionePersonaleATA() {
        // Logica per l'opzione Personale ATA
        console.log("Funzione per Personale ATA");
        let url = "http://10.1.0.52:8080/circolari?personale=1";
        let risposta = await fetch(url);
        if (risposta.ok) {
            let dati = await risposta.json();
            console.log(dati);
        }

    }

    async function funzionePerTutti() {
        // Logica per l'opzione Per tutti
        console.log("Funzione per Per tutti");
        let url = "http://10.1.0.52:8080/circolari";
        let risposta = await fetch(url);
        if (risposta.ok) {
            let dati = await risposta.json();
            console.log(dati);
        }

    }

    async function caricda() {
        let url = "http://10.1.0.52:8080/circolari";
        let risposta = await fetch(url);
        var categoriaSelezionata = document.getElementById("ricCategoria").value;
        // Qui puoi fare ciò che desideri con la categoria selezionata
        console.log("Categoria selezionata:", categoriaSelezionata);
        if (risposta.ok) {
            let dati = await risposta.json();
            for (let i = 0; i < dati.length; i++) {
                let numero = dati[i].numero;
                let nome = dati[i].nome;
                let data = dati[i].data;
                let tipologia = "";
                if (dati[i].famiglia) {
                    tipologia += "famiglia";
                }
                if (dati[i].docenti) {
                    if (tipologia == "") {
                        tipologia += "docenti";
                    } else {
                        tipologia += ", docenti";
                    }
                }

                if (dati[i].personale) {
                    if (tipologia == "") {
                        tipologia += "personale";
                    } else {
                        tipologia += ", personale";
                    }
                }

                if (dati[i].alunni) {
                    if (tipologia == "") {
                        tipologia += "alunni";
                    } else {
                        tipologia += ", alunni";
                    }
                }

                if (dati[i].albo_sindacale) {
                    if (tipologia == "") {
                        tipologia += "albo_sindacale";
                    } else {
                        tipologia += ", albo_sindacale";
                    }
                }

                console.log("Numero: " + numero);
                console.log("Nome: " + nome);
                console.log("Data: " + data);
                console.log("Tipologia: " + tipologia);

                // Seleziona il div di destinazione
                var divDestinazione = document.getElementById("ultimecirc");

                // Crea un nuovo elemento div
                var nuovoDiv = document.createElement("div");
                nuovoDiv.className = "circ";
                nuovoDiv.setAttribute("width", "50em");
                nuovoDiv.setAttribute("onclick", "aggiungi()");

                // Contenuto del nuovo div
                nuovoDiv.innerHTML = `
                    <div id="icone">
                        <img src="pdf.png" width="50em">
                    </div>
                    <div id="testo">
                        <h4>CIRC500</h4>
                        <p>Simulazione seconda prova scritta 5M1 5M2 7 maggio 2024.</p>
                        <h4>03-05-2024</h4>
                        <p>Tutto il personale</p>
                    </div>
                `;

                // Aggiungi il nuovo div al div di destinazione
                divDestinazione.appendChild(nuovoDiv);

            }

        }
    }
</script>

</html>